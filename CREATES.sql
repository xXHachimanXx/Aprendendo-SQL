-- Nome: Felipe Andrade Martins
-- Matrícula: 635093PRIMARY
create database BD2;
use BD2;
-- Questão01
CREATE TABLE AUTOR (
    NOMEAUT VARCHAR(100) NOT NULL,
    CODIGO INT NOT NULL,
    PRIMARY KEY (CODIGO),
    UNIQUE (NOMEAUT)
);
    
CREATE TABLE EDITORA (
    NOMEEDIT VARCHAR(100) NOT NULL,
    CODIGO INT NOT NULL,
    PRIMARY KEY (CODIGO),
    UNIQUE (NOMEEDIT)
);

CREATE TABLE ASSUNTO (
    DESCRICAO VARCHAR(100) NOT NULL,
    CODIGO INT NOT NULL,
    PRIMARY KEY (CODIGO),
    UNIQUE (DESCRICAO)
);


CREATE TABLE LIVRO (
    CODIGO INT NOT NULL,
    TITULO VARCHAR(100) NOT NULL,
    ANOPUBLIC INT,
    CODEDIT INT NOT NULL,
    CODASSUNTO INT NOT NULL,
    PRIMARY KEY (CODIGO),
    FOREIGN KEY (CODEDIT)
        REFERENCES EDITORA (CODIGO),
    FOREIGN KEY (CODASSUNTO)
        REFERENCES ASSUNTO (CODIGO)
);

CREATE TABLE AUTORIA (
    CODLIVRO INT NOT NULL,
    CODAUTOR INT NOT NULL,
    PRIMARY KEY (CODAUTOR),
    FOREIGN KEY (CODLIVRO)
        REFERENCES LIVRO (CODIGO),
	FOREIGN KEY (CODAUTOR)
        REFERENCES AUTOR (CODIGO)
);

CREATE TABLE EXEMPLAR (
    CODEXEMPLAR INT NOT NULL,
    CODLIVRO INT NOT NULL,
    DATAAQUISICAO INT NOT NULL,
    VALORAQUISICAO FLOAT,
    PRIMARY KEY (CODEXEMPLAR),
    FOREIGN KEY (CODLIVRO)
        REFERENCES LIVRO (CODIGO)
);

CREATE TABLE ALUNO (
    CODIGO INT NOT NULL,
    NOME TEXT NOT NULL,
    DATANASC DATE NOT NULL,
    CIDADE TEXT NOT NULL,
    PRIMARY KEY (CODIGO)
);

CREATE TABLE EMPRESTIMO (
    CODEMPREST INT NOT NULL,
    DATAEMPREST DATE,
    CODALUNO INT,
    PRIMARY KEY (CODEMPREST),    
    FOREIGN KEY (CODALUNO)
        REFERENCES ALUNO (CODIGO)
);

CREATE TABLE ITEMEMPREST (
    CODEMPRESTITEM INT NOT NULL,
    CODEXEMPLAR INT NOT NULL,
    DATADEVOLUCAO DATE NOT NULL,
    MULTA FLOAT,
    FOREIGN KEY (CODEMPRESTITEM)
        REFERENCES EMPRESTIMO (CODEMPREST),
	FOREIGN KEY (CODEXEMPLAR)
        REFERENCES EXEMPLAR (CODEXEMPLAR)
);

-- Questão 02
INSERT INTO AUTOR
    VALUES ("CLEITON VERGAS", 1);

INSERT INTO AUTOR
    VALUES ("CHICO TORRESMO", 2);
    
INSERT INTO AUTOR
    VALUES ("NILSON FREITAS", 3);
    
INSERT INTO AUTOR
    VALUES ("MILTON MOURÃO", 4);
    
INSERT INTO AUTOR
    VALUES ("NIKOLAI LESKOV", 5);
    
INSERT INTO AUTOR
    VALUES ("RUBINHO KERENINA", 6);
    
INSERT INTO AUTOR
    VALUES ("LIEV TOLSTOI", 7);

INSERT INTO EDITORA
    VALUES ("VEJA", 1);

INSERT INTO EDITORA
    VALUES ("FUI", 2);
    
INSERT INTO EDITORA
    VALUES ("YOU", 3);
    
INSERT INTO EDITORA
    VALUES ("TOPS DOS TOPS", 4);
    
INSERT INTO EDITORA
    VALUES ("EDITORA TOIS", 5);

-- INSERT EM ASSUNTO
INSERT INTO ASSUNTO
    VALUES ("ROMANCE", 1);

INSERT INTO ASSUNTO
    VALUES ("LITERATURA BRASILEIRA", 2);
    
INSERT INTO ASSUNTO
    VALUES ("COMÉDIA", 3);
    
INSERT INTO ASSUNTO
    VALUES ("TERROR", 4);
    
INSERT INTO ASSUNTO
    VALUES ("ERÓTICO", 5);

-- INSERT EM LIVROS
INSERT INTO LIVRO
    VALUES (1, "MEMÓRIAS PÓSTUMAS DE UM ALUNO DA COMPUTAÇÃO", '2019', 1, 1);

INSERT INTO LIVRO
    VALUES (2, "MEMÓRIAS PÓSTUMAS DE BRAS CUBAS", '2019', 1, 2);

INSERT INTO LIVRO
    VALUES (3, "REI DO GADO", '2019', 2, 3);
    
-- INSERT EM EXEMPLAR
INSERT INTO EXEMPLAR
    VALUES (1, 1, '2019', 200);
    
INSERT INTO EXEMPLAR
    VALUES (2, 1, '2019', 200);    
    
INSERT INTO EXEMPLAR
    VALUES (3, 1, '2019', 200);
    
INSERT INTO EXEMPLAR
    VALUES (4, 1, '2019', 200);
    
INSERT INTO EXEMPLAR
    VALUES (5, 2, '2011', 200);
    
INSERT INTO EXEMPLAR
    VALUES (6, 2, '2019', 200);
    
INSERT INTO EXEMPLAR
    VALUES (7, 2, '2019', 200);    
    
INSERT INTO EXEMPLAR
    VALUES (8, 2, '2019', 200);
    
INSERT INTO EXEMPLAR
    VALUES (9, 2, '2011', 200);

-- INSERT EM ALUNO
INSERT INTO ALUNO
    VALUES (1, "Bernardo Valadares", '2000-01-01', "BH");
    
INSERT INTO ALUNO
    VALUES (2, "Nilsinho Sorriso", '2002-01-01', "BAILE DA GAIOLA");
    
INSERT INTO ALUNO
    VALUES (3, "Oscar Alho", '2002-01-01', "IPATINGA");
    
-- INSERT EM EMPRESTIMO
INSERT INTO EMPRESTIMO
    VALUES (1, '2011-01-01', 1);
    
INSERT INTO EMPRESTIMO
    VALUES (2, '2011-01-01', 1);

INSERT INTO EMPRESTIMO
    VALUES (3, '2011-01-01', 1);

INSERT INTO EMPRESTIMO
    VALUES (4, '2011-01-01', 1);    

INSERT INTO EMPRESTIMO
    VALUES (5, '2011-01-01', 1);

INSERT INTO EMPRESTIMO
    VALUES (6, '2011-01-01', 1);
 
 INSERT INTO EMPRESTIMO
    VALUES (7, '2011-01-01', 1);
INSERT INTO EMPRESTIMO
    VALUES (8, '2011-01-01', 1);
INSERT INTO EMPRESTIMO
    VALUES (9, '2011-01-01', 1);
INSERT INTO EMPRESTIMO
    VALUES (10, '2011-01-01', 1);    
 
    
    
    
-- INSERT EM ITEMEMPREST
INSERT INTO ITEMEMPREST
    VALUES (1, 1, '2011-01-01', 300);

INSERT INTO ITEMEMPREST
    VALUES (1, 2, '2016-01-01', 300);

INSERT INTO ITEMEMPREST
    VALUES (3, 4, '2013-01-01', 300);

-- INSERT EM AUTORIA
INSERT INTO AUTORIA
    VALUES (1, 1);

INSERT INTO AUTORIA
    VALUES (2, 2);

INSERT INTO AUTORIA
    VALUES (3, 3);
    
    
-- Questão 03

